{% extends 'base.html' %}
{% block content %}
<div class="container-box">
    <h1 class="text-center mb-4">Startup Outcome Prediction</h1>

    <form id="predictionForm">
        <div class="row">
            <div class="col-md-6">
                <label>Founded Year:</label>
                <input type="number" name="founded_at" class="form-control" required>

                <label>First Funding At:</label>
                <input type="number" name="first_funding_at" class="form-control" required>

                <label>Last Funding At:</label>
                <input type="number" name="last_funding_at" class="form-control" required>

                <label>Funding Rounds:</label>
                <input type="number" name="funding_rounds" class="form-control" required>

                <label>Funding Total USD:</label>
                <input type="number" name="funding_total_usd" class="form-control" required>

                <label>First Milestone At:</label>
                <input type="number" name="first_milestone_at" class="form-control" required>
            </div>
            <div class="col-md-6">
                <label>Last Milestone At:</label>
                <input type="number" name="last_milestone_at" class="form-control" required>

                <label>Milestones:</label>
                <input type="number" name="milestones" class="form-control" required>

                <label>Relationships:</label>
                <input type="number" name="relationships" class="form-control" required>

                <label>Investment Rounds:</label>
                <input type="number" name="investment_rounds" class="form-control" required>

                <label>Latitude:</label>
                <input type="number" step="any" name="lat" class="form-control" required>

                <label>Longitude:</label>
                <input type="number" step="any" name="lng" class="form-control" required>
            </div>
        </div>

        <label>Category:</label>
        <select name="category" class="form-control" required>
            <option value="software">Software</option>
            <option value="web">Web</option>
            <option value="biotech">Biotech</option>
            <option value="mobile">Mobile</option>
            <option value="ecommerce">Ecommerce</option>
        </select>

        <label>Country:</label>
        <select name="country" class="form-control" required>
            <option value="USA">USA</option>
            <option value="IND">India</option>
            <option value="GBR">UK</option>
            <option value="CAN">Canada</option>
            <option value="AUS">Australia</option>
        </select>

        <!-- Removed Prediction Type options -->

        <button type="submit" class="btn btn-primary w-100 mt-3">Predict (Multiclass)</button>
    </form>

    <div class="result text-center mt-3" id="result"></div>
</div>

<script>
    document.getElementById("predictionForm").addEventListener("submit", async function (e) {
        e.preventDefault();

        const formData = new FormData(this);
        const data = {};

        formData.forEach((value, key) => {
            data[key] = isNaN(value) || value === "" ? value : parseFloat(value);
        });

        const resultDiv = document.getElementById("result");

        try {
            const response = await fetch("/predict-multiclass", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data)
            });

            const result = await response.json();

            if (response.ok) {
                resultDiv.textContent = `Prediction: ${result.status}`;
            } else {
                resultDiv.textContent = `Error: ${result.error}`;
            }
        } catch (err) {
            resultDiv.textContent = `Error: ${err.message}`;
        }
    });
</script>
{% endblock %}
